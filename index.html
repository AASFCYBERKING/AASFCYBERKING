<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Interface</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #60a5fa;
            --background-color: #eff6ff;
            --text-color: #1e40af;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--background-color), #ffffff, var(--background-color));
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }

        .animate-slide-in-left {
            animation: slideInLeft 0.3s ease-out;
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .animate-bounce {
            animation: bounce 1s infinite;
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .chat-container {
            height: calc(100vh - 200px);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--background-color);
        }

        .chat-container::-webkit-scrollbar {
            width: 8px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: var(--background-color);
        }

        .chat-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        .message-bubble {
            max-width: 80%;
            padding: 0.75rem;
            border-radius: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .message-bubble:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        .user-message {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            margin-left: auto;
        }

        .ai-message {
            background: linear-gradient(135deg, #93c5fd, var(--secondary-color));
            color: white;
        }

        .typing-indicator {
            display: flex;
            justify-content: center;
        }

        .typing-indicator span {
            height: 10px;
            width: 10px;
            margin: 0 2px;
            background-color: #ffffff;
            border-radius: 50%;
            display: inline-block;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @media (max-width: 640px) {
            .message-bubble {
                max-width: 90%;
            }
        }

        .user-avatar, .ai-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
        }

        .user-avatar {
            background-color: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .ai-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-white text-blue-900">
    <div id="loadingScreen" class="fixed inset-0 flex items-center justify-center bg-white z-50">
        <div class="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500"></div>
    </div>

    <header class="flex items-center justify-between p-4 bg-white shadow-md">
        <div class="flex items-center">
            <button id="menuButton" class="mr-2 text-blue-900 hover:bg-blue-100 transition-colors duration-300">
                <i class="fas fa-bars h-6 w-6"></i>
            </button>
            <div class="flex items-center space-x-2">
                <img src="src/dharam.png" alt="Website Logo" class="w-8 h-8 animate-pulse">
                <span class="text-xl font-semibold text-blue-900">AI Chat</span>
            </div>
        </div>
    </header>

    <nav id="navbar" class="fixed inset-0 bg-blue-100 bg-opacity-50 backdrop-filter backdrop-blur-sm z-50 hidden">
        <div class="w-64 h-full bg-white p-4 flex flex-col animate-slide-in-left">
            <div class="flex justify-between items-center mb-8">
                <span class="text-xl font-semibold text-blue-900">Menu</span>
                <button id="closeNavButton" class="text-blue-900 hover:bg-blue-100 transition-colors duration-300">
                    <i class="fas fa-times h-6 w-6"></i>
                </button>
            </div>
            <div class="space-y-4">
                <button class="nav-button w-full justify-start text-blue-900 hover:bg-blue-100 transition-colors duration-300" data-section="home">
                    <i class="fas fa-home h-5 w-5 mr-3"></i>
                    Home
                </button>
                <button class="nav-button w-full justify-start text-blue-900 hover:bg-blue-100 transition-colors duration-300" data-section="about">
                    <i class="fas fa-info-circle h-5 w-5 mr-3"></i>
                    About
                </button>
                <button class="nav-button w-full justify-start text-blue-900 hover:bg-blue-100 transition-colors duration-300" data-section="contact">
                    <i class="fas fa-phone h-5 w-5 mr-3"></i>
                    Contact
                </button>
            </div>
        </div>
    </nav>

    <main id="mainContent" class="flex-1 flex flex-col overflow-hidden">
        <div id="homeSection" class="flex-1 flex flex-col">
            <div id="welcomeMessage" class="flex items-center justify-center flex-1">
                <h1 class="text-4xl font-bold text-center text-blue-900 animate-pulse">
                    Hello! How can I assist you today?
                </h1>
            </div>
            <div id="chatContainer" class="chat-container flex-1 overflow-y-auto p-4 space-y-6 hidden"></div>
            <div class="p-4 bg-white shadow-md">
                <form id="chatForm" class="flex space-x-2">
                    <input 
                        id="userInput"
                        class="flex-1 bg-blue-50 border-blue-200 focus:border-blue-500 text-blue-900 placeholder-blue-400 text-sm md:text-base rounded-full px-4 py-2 transition-all duration-300 focus:ring-2 focus:ring-blue-400"
                        placeholder="Type your message here..."
                    >
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white rounded-full px-4 py-2 transition-all duration-300 transform hover:scale-105">
                        <i class="fas fa-paper-plane h-4 w-4 md:mr-2"></i>
                        <span class="hidden md:inline">Send</span>
                    </button>
                </form>
            </div>
        </div>

        <div id="aboutSection" class="hidden flex-1 overflow-y-auto p-8 space-y-8 bg-white">
            <h2 class="text-4xl font-bold mb-6 text-center text-blue-900 animate-fade-in-down">
                Meet Your AI Companion
            </h2>
            <div class="max-w-3xl mx-auto space-y-6 text-blue-800">
                <p class="text-lg leading-relaxed animate-fade-in">
                    Welcome to the cutting-edge of educational technology! I'm not just any chatbot â€“ I'm a personalized AI assistant crafted exclusively for the brilliant minds at DHARAM HINDUJA MATRICULATION HIGHER SECONDARY SCHOOL.
                </p>
                <div class="flex items-center justify-center space-x-4 my-8">
                    <i class="fas fa-bolt h-12 w-12 text-blue-600 animate-pulse"></i>
                    <i class="fas fa-code h-12 w-12 text-blue-600 animate-bounce"></i>
                    <i class="fas fa-magic h-12 w-12 text-blue-600 animate-spin"></i>
                </div>
                <p class="text-lg leading-relaxed animate-fade-in">
                    Born from the innovative spirit of Harish, a visionary student at DHARAM HINDUJA, I represent the perfect fusion of youthful creativity and artificial intelligence. Harish poured his passion for technology and education into every line of my code, crafting an AI companion that understands the unique needs of his fellow students.
                </p>
                <p class="text-lg leading-relaxed animate-fade-in">
                    I'm here to revolutionize your learning experience, providing instant assistance, thought-provoking discussions, and a touch of digital magic to your educational journey. Whether you're tackling complex math problems, exploring the depths of literature, or diving into scientific theories, I'm your round-the-clock study buddy and knowledge enhancer.
                </p>
                <div class="text-center mt-8">
                    <span class="text-2xl font-semibold text-blue-900 animate-pulse">
                        Empowering Minds, One Conversation at a Time
                    </span>
                </div>
            </div>
        </div>

        <div id="contactSection" class="hidden flex-1 overflow-y-auto p-8 bg-white">
            <h2 class="text-3xl font-bold mb-6 text-center text-blue-900 animate-fade-in-down">
                Get in Touch
            </h2>
            <div class="max-w-2xl mx-auto space-y-8">
                <div class="bg-blue-50 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-blue-800">School Contact Information</h3>
                    <p class="text-blue-700 mb-2">DHARAM HINDUJA MATRICULATION HIGHER SECONDARY SCHOOL</p>
                    <p class="text-blue-700 mb-2">No.19, Poonthottam Street, Tiruvottiyur, Chennai - 600 019, Tamilnadu</p>
                    <p class="text-blue-700 mb-2">Phone: (044) 2572-7553, +91 9025218724</p>
                    <p class="text-blue-700">Email: dharam_hinduja@yahoo.com</p>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-blue-800 flex items-center">
                        <i class="fas fa-envelope mr-2"></i>
                        Contact the Developer
                    </h3>
                    <form id="contactForm" class="space-y-4">
                        <div class="relative">
                            <input
                                type="email"
                                id="contactEmail"
                                placeholder="Your Email"
                                class="w-full p-2 pl-10 bg-white border-blue-200 text-blue-900 focus:ring-2 focus:ring-blue-400 transition-all duration-300 rounded"
                            >
                            <i class="fas fa-envelope absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-400"></i>
                        </div>
                        <div class="relative">
                            <textarea
                                id="contactMessage"
                                placeholder="Your message"
                                class="w-full p-2 pl-10 bg-white border-blue-200 text-blue-900 focus:ring-2 focus:ring-blue-400 transition-all duration-300 rounded h-32"
                            ></textarea>
                            <i class="fas fa-comment absolute left-3 top-3  text-blue-400"></i>
                        </div>
                        <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center justify-center">
                            <i class="fas fa-paper-plane mr-2"></i>
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer class="p-4 bg-white shadow-md text-blue-900 text-xs md:text-sm">
        <p class="font-semibold">DHARAM HINDUJA MATRICULATION HIGHER SECONDARY SCHOOL</p>
        <p>No.19, Poonthottam Street, Tiruvottiyur, Chennai - 600 019, Tamilnadu</p>
        <p>P: (044) 2572-7553, +91 9025218724</p>
        <p>E: dharam_hinduja@yahoo.com</p>
    </footer>

    <div id="reportDialog" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg max-w-md w-full">
            <h2 class="text-xl font-bold mb-4">Report a Problem</h2>
            <input type="email" id="reportEmail" placeholder="Your Email" class="w-full p-2 mb-4 bg-blue-50 border-blue-200 text-blue-900 focus:ring-2 focus:ring-blue-400 transition-all duration-300 rounded">
            <textarea id="reportProblem" placeholder="Describe the problem" class="w-full p-2 mb-4 bg-blue-50 border-blue-200 text-blue-900 focus:ring-2 focus:ring-blue-400 transition-all duration-300 rounded h-32"></textarea>
            <input type="hidden" id="reportedContent">
            <div class="flex justify-end">
                <button id="cancelReport" class="mr-2 px-4 py-2 bg-gray-200 rounded">Cancel</button>
                <button id="submitReport" class="px-4 py-2 bg-blue-500 text-white rounded">Submit</button>
            </div>
        </div>
    </div>
    
    <div id="notifications" class="fixed bottom-4 right-4 space-y-4"></div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');
        const chatForm = document.getElementById('chatForm');
        const menuButton = document.getElementById('menuButton');
        const navbar = document.getElementById('navbar');
        const closeNavButton = document.getElementById('closeNavButton');
        const reportDialog = document.getElementById('reportDialog');
        const submitReportButton = document.getElementById('submitReport');
        const cancelReportButton = document.getElementById('cancelReport');
        const navButtons = document.querySelectorAll('.nav-button');
        const sections = {
            home: document.getElementById('homeSection'),
            about: document.getElementById('aboutSection'),
            contact: document.getElementById('contactSection')
        };
        const notificationsContainer = document.getElementById('notifications');
        const contactForm = document.getElementById('contactForm');
        const welcomeMessage = document.getElementById('welcomeMessage');

        let messages = [];
        let isThinking = false;
        let activeSection = 'home';
        let showWelcome = true;

        function switchSection(sectionName) {
            Object.values(sections).forEach(section => section.classList.add('hidden'));
            sections[sectionName].classList.remove('hidden');
            activeSection = sectionName;
            navbar.classList.add('hidden');
        }

        function addMessage(role, content) {
            if (showWelcome) {
                welcomeMessage.classList.add('hidden');
                chatContainer.classList.remove('hidden');
                showWelcome = false;
            }
            const messageElement = document.createElement('div');
            messageElement.className = `flex ${role === 'user' ? 'justify-end' : 'justify-start'} animate-fade-in-up`;

            const innerDiv = document.createElement('div');
            innerDiv.className = `flex items-start space-x-2 max-w-[80%] ${role === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`;

            const avatar = document.createElement('div');
            avatar.className = role === 'user' ? 'user-avatar' : 'ai-avatar';
            avatar.innerHTML = role === 'user' ? '<i class="fas fa-user"></i>' : '<img src="src/dharam.jpg" alt="AI">';

            const messageContent = document.createElement('div');
            messageContent.className = `p-3 rounded-lg ${role === 'user' ? 'bg-blue-500' : 'bg-blue-100'} ${role === 'user' ? 'text-white' : 'text-blue-900'} text-sm md:text-base shadow-md`;
            messageContent.innerHTML = formatMessage(content);

            if (role === 'assistant') {
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'flex mt-2 space-x-2';
                actionsDiv.innerHTML = `
                    <button data-action="copy" data-content="${escapeHtml(content)}" class="text-blue-500 hover:text-blue-600 transition-colors duration-300">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button data-action="report" data-content="${escapeHtml(content)}" class="text-blue-500 hover:text-blue-600 transition-colors duration-300">
                        <i class="fas fa-flag"></i>
                    </button>
                    <button data-action="again" data-content="${escapeHtml(content)}" class="text-blue-500 hover:text-blue-600 transition-colors duration-300">
                        <i class="fas fa-redo"></i>
                    </button>
                `;
                messageContent.appendChild(actionsDiv);
            }

            innerDiv.appendChild(avatar);
            innerDiv.appendChild(messageContent);
            messageElement.appendChild(innerDiv);
            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        function formatMessage(content) {
            content = content.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); // Bold
            content = content.replace(/\*(.*?)\*/g, '<em>$1</em>'); // Italic
            content = content.replace(/`(.*?)`/g, '<code>$1</code>'); // Code
            content = content.replace(/^(#{1,6})\s(.*)$/gm, (match, hashes, text) => `<h${hashes.length}>${text}</h${hashes.length}>`); // Headings
            content = content.replace(/^\s*[-*+]\s(.*)$/gm, '<li>$1</li>'); // Unordered list items
            content = content.replace(/^\d+\.\s(.*)$/gm, '<li>$1</li>'); // Ordered list items

            const orderedList = content.match(/<li>.*<\/li>/g);
            if (orderedList) {
                content = content.replace(/(<li>.*<\/li>)/s, '<ol>$1</ol>');
            }
    
            const unorderedList = content.match(/<li>.*<\/li>/g);
            if (unorderedList) {
                content = content.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
            }

            return content;
        }
        
        function escapeHtml(unsafe) {
            return unsafe
                 .replace(/&/g, "&amp;")
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;")
                 .replace(/"/g, "&quot;")
                 .replace(/'/g, "&#039;");
        }

        function setThinking(thinking) {
            isThinking = thinking;
            if (thinking) {
                const thinkingElement = document.createElement('div');
                thinkingElement.className = 'flex justify-start animate-fade-in-up';
                thinkingElement.innerHTML = `
                    <div class="flex items-end space-x-2 max-w-[80%]">
                        <div class="w-8 h-8 bg-transparent rounded-full">
                            <img src="src/dharam.jpg" alt="AI" class="ai-logo">
                        </div>
                        <div class="p-3 rounded-lg bg-blue-100 text-sm md:text-base shadow-md">
                            <div class="flex space-x-2">
                                <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce"></div>
                                <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
                            </div>
                        </div>
                    </div>
                `;
                chatContainer.appendChild(thinkingElement);
            } else {
                const thinkingElement = chatContainer.querySelector('.animate-fade-in-up:last-child');
                if (thinkingElement) {
                    thinkingElement.remove();
                }
            }
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        async function sendMessage(message) {
            if (message.trim()) {
                addMessage('user', message);
                setThinking(true);
                try {
                    const response = await axios.post('https://api.qewertyy.dev/models', {
                        messages: [
                            { role: "system", content: "None" },
                            { role: "user", content: message }
                        ],
                        model_id: 23
                    });
                    if (response.data.content && response.data.content[0] && response.data.content[0].text) {
                        const aiResponse = response.data.content[0].text;
                        setThinking(false);
                        addMessage('assistant', aiResponse);
                    } else {
                        throw new Error('Unexpected response structure');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    setThinking(false);
                    addNotification('error', 'Failed to get response. Please try again.');
                }
            }
        }

        function addNotification(type, message) {
            const notification = document.createElement('div');
            notification.className = `bg-white p-4 rounded-lg shadow-lg flex items-center space-x-3 ${
                type === 'error' ? 'border-l-4 border-red-500' :
                type === 'report' ? 'border-l-4 border-green-500' :
                type === 'info' ? 'border-l-4 border-yellow-500' :
                'border-l-4 border-blue-500'
            }`;
            
            const iconClass = type === 'error' ? 'fa-exclamation-triangle text-red-500' :
                              type === 'report' ? 'fa-file-alt text-green-500' :
                              type === 'info' ? 'fa-info-circle text-yellow-500' :
                              'fa-bell text-blue-500';
            
            notification.innerHTML = `
                <div class="animate-bounce">
                    <i class="fas ${iconClass} h-6 w-6"></i>
                </div>
                <div>
                    <h3 class="font-semibold ${
                        type === 'error' ? 'text-red-800' :
                        type === 'report' ? 'text-green-800' :
                        type === 'info' ? 'text-yellow-800' :
                        'text-blue-800'
                    }">${type.charAt(0).toUpperCase() + type.slice(1)}</h3>
                    <p class="text-sm ${
                        type === 'error' ? 'text-red-600' :
                        type === 'report' ? 'text-green-600' :
                        type === 'info' ? 'text-yellow-600' :
                        'text-blue-600'
                    }">${message}</p>
                </div>
                <button onclick="this.parentElement.remove()" class="text-gray-500 hover:${
                    type === 'error' ? 'text-red-700' :
                    type === 'report' ? 'text-green-700' :
                    type === 'info' ? 'text-yellow-700' :
                    'text-blue-700'
                }">
                    <i class="fas fa-times h-4 w-4"></i>
                </button>
            `;
            
            notificationsContainer.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function handleCopy(content) {
            navigator.clipboard.writeText(content).then(() => {
                addNotification('info', 'Response copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                addNotification('error', 'Failed to copy content.');
            });
        }

        function handleReport(content) {
            reportDialog.classList.remove('hidden');
            document.getElementById('reportEmail').value = '';
            document.getElementById('reportProblem').value = '';
            document.getElementById('reportedContent').value = content;
        }

        async function handleAgain(content) {
            const lastUserMessage = messages.filter(m => m.role === 'user').pop();
            if (lastUserMessage) {
                setThinking(true);
                try {
                    const response = await axios.post('https://api.qewertyy.dev/models', {
                        messages: [
                            { role: "system", content: "None" },
                            { role: "user", content: lastUserMessage.content }
                        ],
                        model_id: 23
                    });

                    if (response.data.content && response.data.content[0] && response.data.content[0].text) {
                        const aiResponse = response.data.content[0].text;
                        setThinking(false);
                        addMessage('assistant', aiResponse);
                    } else {
                        throw new Error('Unexpected response structure');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    setThinking(false);
                    addNotification('error', 'Failed to regenerate response. Please try again.');
                }
            } else {
                addNotification('error', 'No previous user message found to regenerate.');
            }
        }

        async function submitReport() {
            const email = document.getElementById('reportEmail').value;
            const problem = document.getElementById('reportProblem').value;
            const reportedContent = document.getElementById('reportedContent').value;
            
            if (!email || !problem) {
                addNotification('error', 'Please fill in both email and problem description.');
                return;
            }

            const TOKEN = '8188094426:AAHgwqlzOuNY8VckUrYL5sNkENsu-sCQOFQ';
            const CHAT_ID = '5629305049';
            const reportMessage = `Report from ${email}:\n\nProblem: ${problem}\n\nReported Content: ${reportedContent}`;
            const url = `https://api.telegram.org/bot${TOKEN}/sendMessage`;

            try {
                const response = await axios.post(url, {
                    chat_id: CHAT_ID,
                    text: reportMessage,
                });

                if (response.status ===  200) {
                    addNotification('report', 'Report submitted successfully. Thank you for your feedback!');
                    reportDialog.classList.add('hidden');
                    document.getElementById('reportEmail').value = '';
                    document.getElementById('reportProblem').value = '';
                    document.getElementById('reportedContent').value = '';
                } else {
                    throw new Error('Failed to submit report');
                }
            } catch (error) {
                console.error('Error submitting report:', error);
                addNotification('error', `Failed to submit report. Please try again. ${error}`);
            }
        }

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const message = userInput.value.trim();
            if (message) {
                messages.push({ role: 'user', content: message });
                sendMessage(message);
                userInput.value = '';
            }
        });

        menuButton.addEventListener('click', () => navbar.classList.remove('hidden'));
        closeNavButton.addEventListener('click', () => navbar.classList.add('hidden'));

        navButtons.forEach(button => {
            button.addEventListener('click', () => switchSection(button.dataset.section));
        });

        submitReportButton.addEventListener('click', submitReport);
        cancelReportButton.addEventListener('click', () => reportDialog.classList.add('hidden'));

        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;

            if (!email || !message) {
                addNotification('error', 'Please fill in all fields.');
                return;
            }

            const TOKEN = '8188094426:AAHgwqlzOuNY8VckUrYL5sNkENsu-sCQOFQ';
            const CHAT_ID = '5629305049';
            const contactMessage = `ðŸ“¬ New contact from ${email}:\n\nðŸ’¬ ${message}`;
            const url = `https://api.telegram.org/bot${TOKEN}/sendMessage`;

            try {
                const response = await axios.post(url, {
                    chat_id: CHAT_ID,
                    text: contactMessage,
                });

                if (response.status === 200) {
                    addNotification('info', "Message sent successfully! We'll reply as soon as possible.");
                    document.getElementById('contactEmail').value = '';
                    document.getElementById('contactMessage').value = '';
                }
            } catch (error) {
                console.error('Error sending message:', error);
                addNotification('error', 'Failed to send message. Please try again later.');
            }
        });

        setTimeout(() => {
            addNotification('welcome', 'Welcome to AI Chat! Feel free to ask any questions.');
        }, 2000);

        window.addEventListener('load', () => {
            document.getElementById('loadingScreen').style.display = 'none';
        });

        chatContainer.addEventListener('click', (event) => {
            if (event.target.closest('button')) {
                const button = event.target.closest('button');
                const action = button.getAttribute('data-action');
                const content = button.getAttribute('data-content');

                if (action === 'copy') {
                    handleCopy(content);
                } else if (action === 'report') {
                    handleReport(content);
                } else if (action === 'again') {
                    handleAgain(content);
                }
            }
        });
    </script>
</body>
</html>
